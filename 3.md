# OpenMP并行编程技术--第一节：基本介绍

 ------
 ------
 1. 并发：两个或多个事件在同一时间间隔内发生.
 2. 并行：两个或多个事件在同一时刻发生。
 3. 并行计算：同时使用多种计算资源解决计算问题的过程。（多CPU同时完成一个任务）
 4. 进程：正在运行的程序的实例。
 5. 线程：一个程序可以有很多线程，且执行不同任务，同一进程中的所有线程共享进程中的所有资源。
 6. 超线程：实现单个处理器的线程级的并行计算
   ------
   ------
   **OpenMP**的概念：
 1. 一种面向共享内存的多CPU多线程并行编程接口。
 2. 由编译指导语句、库函数、和环境变量组成
 3. 编译指导语句：#pragma omp <directive>[clause[[,]clause]...]
   
   ### OpenMP常用指令
|指令|功能|
| ---- | ---- |
|parallel|用在一个结构块之前，表示这段代码将被多个线程并行执行|
|for|用于for循环语句之前，表示将循环计算任务分配到多个线程中并行执行，需保证每次循环之间无数据相关性|
|sections|用在要被并行执行的代码段之前，用于实现多个结构块语句的任务分担，可并行执行的代码段各自用section指令标出（注意区分sections和section）|
|critical|用在一段代码临界区之前，保证每次只有一个OpenMP线程进入|
|single|用在并行域内，表示一段只被单个线程执行的代码|
|flush|保证各个OpenMP线程的数据影像的一致性|
|barrier|用于并行域内代码的线程同步，线程执行到barrier时要停下等待，直到所有线程都执行到barrier时才继续往下执行| 
------
------

 ### OpenMP常用子句
|子句|功能|
| ---- | ---- |
|private|指定一个或多个变量在每个线程中都有它自己的私有副本|
|shared|指定一个或多个变量为多个线程间的共享变量|
|default|用来指定并行域内的变量的使用方式，缺省是shared|
|firstprivate|指定一个或多个变量在每个线程都有它自己的私有副本，并且私有变量要在进入并行域或任务分担域时，继承主线程中的同名变量的值作为初值|
|lastprivate|是用来指定将线程中的一个或多个私有变量的值在并行处理结束后复制到主线程中的同名变量中，负责拷贝的线程是for或sections任务分担中的最后一个线程|
|reduction|用来指定一个或多个变量是私有的，并且在并行处理结束后这些变量要执行指定的归约运算，并将结果返回给主线程同名变量|
|copyin|用来指定一个threadprivate类型的变量需要用主线程同名变量进行初始化| 

------
------

当在Linux系统中使用C/C++编译器时，通过添加头文件：#include<omp.h> 实现

### OpenMP常用库函数
|函数名|功能|
| ---- | ---- |
|omp_in_parallel|判断当前是否在并行域中|
|omp_set_num_threads|设置后续并行域中的线程数量|
|omp_get_num_procs|返回计算系统中处理器的个数|
|omp_get_num_threads|返回当前并行域中的线程数|
|omp_get_thread_num|返回当前的线程号|
|omp_get_max_threads|返回当前并行域中可用的最大线程数| 
|omp_get_dynamic|判断是否支持动态改变线程数量|
|omp_set_dynamic|启用或关闭线程数量的动态改变|
|omp_init_lock|初始化一个简单锁|
|omp_set_lock|给一个简单锁上锁|
|omp_unset_lock|给一个简单锁解锁|
|omp_destroy_lock|关闭一个锁并释放内存|
|omp_get_wtime|相对于某个任意参考时刻而言已经经历的时间|

------
------

